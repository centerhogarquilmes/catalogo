<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Center Hogar Quilmes</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="images/logo.webp" type="image/x-icon">
</head>
<body>
    <!-- Header -->
    <body class="product-page">
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">
                        <img src="images/logo_trans.png" alt="Center Hogar Quilmes" class="logo-img">
                    </a>
                </div>
                <div class="header-actions">
                    <div class="user-options">
                        <a href="presupuesto.html" class="user-link" title="Pedir presupuesto" aria-label="Pedir presupuesto">
                            <span class="icon">üìù</span>
                            <span class="label">Pedir presupuesto</span>
                        </a>
                        <a href="contacto.html" class="cart-link" title="Contacto" aria-label="Contacto">
                            <span class="icon">üì±</span>
                            <span class="label">Contacto</span>
                        </a>
                    </div>
                    <button class="menu-toggle" aria-label="Abrir men√∫ de navegaci√≥n">‚ò∞</button>
                </div>
            </div>
            <div class="search-bar">
                <div class="search-bar-input-container">
                    <input type="text" placeholder="Buscar productos..." id="searchInput" autocomplete="off">
                    <button class="search-btn">
                        <img src="images/lupa.png" alt="Buscar" class="search-icon">
                    </button>
                </div>
                <div class="suggestions" id="suggestions" style="display: none;"></div>
            </div>
            <nav class="nav-menu" id="nav-menu">
    <ul>
        <li><a href="categoria.html?nombre=Cocinas">Cocinas</a></li>
        <li><a href="categoria.html?nombre=Heladeras">Heladeras</a></li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Tv y audio">Tv y Audio</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Tv y audio&subcategoria=Tv">Tv</a></li>
                <li><a href="categoria.html?nombre=Tv y audio&subcategoria=Audio">Audio</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Tecnologia">Tecnolog√≠a</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Tecnologia&subcategoria=Celulares">Celulares</a></li>
                <li><a href="categoria.html?nombre=Tecnologia&subcategoria=Notebooks">Notebooks</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Climatizacion">Climatizaci√≥n</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Climatizacion&subcategoria=Calefaccion electrica">Calefacci√≥n el√©ctrica</a></li>
                <li><a href="categoria.html?nombre=Climatizacion&subcategoria=Calefaccion a gas">Calefacci√≥n a gas</a></li>
                <li><a href="categoria.html?nombre=Climatizacion&subcategoria=Ventilacion">Ventilaci√≥n</a></li>
                <li><a href="categoria.html?nombre=Climatizacion&subcategoria=Aires acondicionados">Aires Acondicionados</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Hornos, microondas y freidoras">Hornos, microondas y freidoras</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Hornos, microondas y freidoras&subcategoria=Hornos">Hornos</a></li>
                <li><a href="categoria.html?nombre=Hornos, microondas y freidoras&subcategoria=Microondas">Microondas</a></li>
                <li><a href="categoria.html?nombre=Hornos, microondas y freidoras&subcategoria=Freidoras">Freidoras</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Lavado">Lavado</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Lavado&subcategoria=Lavarropas">Lavarropas</a></li>
                <li><a href="categoria.html?nombre=Lavado&subcategoria=Lavasecarropas">Lavasecarropas</a></li>
                <li><a href="categoria.html?nombre=Lavado&subcategoria=Secarropas">Secarropas</a></li>
                <li><a href="categoria.html?nombre=Lavado&subcategoria=Planchas">Planchas</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Termotanques">Termotanques</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Termotanques&subcategoria=Gas">Gas</a></li>
                <li><a href="categoria.html?nombre=Termotanques&subcategoria=El√©ctrico">El√©ctrico</a></li>
                <li><a href="categoria.html?nombre=Termotanques&subcategoria=Dual">Dual</a></li>
            </ul>
        </li><li class="has-submenu">
            <a href="categoria.html?nombre=Peque√±os electrodomesticos">Peque√±os</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Batidoras">Batidoras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Licuadoras">Licuadoras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Multiprocesadoras">Multiprocesadoras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Mixers">Mixers</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Pavas electricas">Pavas El√©ctricas</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Cafeteras">Cafeteras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Tostadoras">Tostadoras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Sandwicheras">Sandwicheras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subCategoria=Exprimidores y jugueras">Exprimidores y Jugueras</a></li>
                <li><a href="categoria.html?nombre=Peque√±os electrodomesticos&subcategoria=Picadoras">Picadoras</a></li>
            </ul>
        </li>
        <li class="has-submenu">
            <a href="categoria.html?nombre=Cuidado personal">Cuidado Personal</a>
            <ul class="submenu">
                <li><a href="categoria.html?nombre=Cuidado personal&subcategoria=Planchas de pelo">Planchas de Pelo</a></li>
                <li><a href="categoria.html?nombre=Cuidado personal&subcategoria=Secadores de pelo">Secadores de Pelo</a></li>
                <li><a href="categoria.html?nombre=Cuidado personal&subcategoria=Cortadoras de pelo y barba">Cortadoras de Pelo y Barba</a></li>
            </ul>
        </li>
    </ul>
</nav>
        </div>
        </body>
    </header>
    <!-- Product Details -->
    <main class="container product-page">
        <!-- Modal para ampliaci√≥n de im√°genes -->
        <div class="image-modal" id="image-modal" style="display: none;">
            <!-- (Tu modal sigue igual) -->
        </div>
        <div class="product-main">
            <div class="image-container">
                <div class="product-images">
                    <div class="main-image-wrapper">
                        <img id="main-image" src="" alt="Producto" class="main-image">
                        <button class="carousel-btn prev">‚ùÆ</button>
                        <button class="carousel-btn next">‚ùØ</button>
                    </div>
                    <div class="thumbnail-gallery" id="thumbnail-gallery"></div>
                </div>
            </div>
            <div class="info-container">
                <div class="product-info">
                    <h1 id="product-name">Nombre del producto</h1>
                    <p class="stock">Stock disponible</p>
                    <a id="whatsapp-contado" href="#" class="contado-btn" target="_blank">Consultar</a>
                    <a id="whatsapp-consulta" href="#" class="consulta-btn" target="_blank">DESCUENTOS AL CONTADO</a>
                    <div class="shipping">
                        <p>Consult√° costos de envio</p>
                        <p>Normalmente se entrega de un dia para el otro</p>
                    </div>
                    <div class="product-description">
                        <h2>Descripci√≥n</h2>
                        <p id="product-description">Descripci√≥n del producto.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-features">
            <h2>Caracter√≠sticas del producto</h2>
            <ul id="product-features"></ul>
        </div>
    </main>

   <!-- Footer -->
    <footer class="footer">
    <div class="container">
        <p>¬© 2025 Center Hogar Quilmes. Todos los derechos reservados.</p>
        <ul>
            <li><a href="terminos.html">T√©rminos y condiciones</a></li>
            <li><a href="contacto.html">Contacto</a></li>
            <li><a href="privacidad.html">Privacidad</a></li>
        </ul>
    </div>
    </footer>

    <!-- Scroll to top -->
    <button class="scroll-to-top" title="Volver arriba">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 19V5"></path>
            <path d="M5 12l7-7 7 7"></path>
        </svg>
    </button>

    <!-- Carga de datos -->
    <script src="precios.js"></script>
    <script src="productos.js"></script>
    <script src="scripts.js"></script>

    <!-- Script personalizado para mostrar precios y stock -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const nombre = urlParams.get('nombre') ? decodeURIComponent(urlParams.get('nombre')) : '';
    const imagen = urlParams.get('imagen') ? decodeURIComponent(urlParams.get('imagen')) : '';
    const imagenes = urlParams.get('imagenes') ? decodeURIComponent(urlParams.get('imagenes')).split(',').filter(i => i) : [];
    const descripcion = urlParams.get('descripcion') ? decodeURIComponent(urlParams.get('descripcion')) : '';
    const caracteristicas = urlParams.get('caracteristicas') ? decodeURIComponent(urlParams.get('caracteristicas')).split(',').filter(c => c) : [];
    const codigoParam = urlParams.get('codigo');

    const producto = productos.find(p => p.nombre === nombre) || productos.find(p => p.codigo === codigoParam);
    const codigo = codigoParam || (producto ? producto.codigo : '');

    if (!codigo) {
        alert("No se pudo obtener el c√≥digo del producto.");
        return;
    }

    const datos = precios[codigo] || { precio_tarjeta: 'No disponible', stock_sucursal: 0, stock_deposito: 0 };
    const precioLista = datos.precio_tarjeta !== 'No disponible' ? parseFloat(datos.precio_tarjeta) : null;
    const precioTexto = precioLista ? `$${precioLista.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : 'Consultar precio';
    const sucursalTexto = datos.stock_sucursal > 0 ? datos.stock_sucursal + ' unidades' : 'Sin stock';
    const depositoTexto = datos.stock_deposito > 0 ? datos.stock_deposito + ' unidades' : 'Sin stock';

    // Calcular Pre.ant.imp.nac como precio_tarjeta / 1.21
    const precioAnterior = precioLista ? precioLista / 1.21 : null;
    const precioAnteriorTexto = precioAnterior ? `$${precioAnterior.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : null;

    // Calcular precios en cuotas
    const cuotas = precioLista ? [
        { cuotas: 3, texto: '3 Cuotas sin inter√©s', precio: precioLista / 3 },
        { cuotas: 6, texto: '6 Cuotas sin inter√©s', precio: precioLista / 6 },
        { cuotas: 9, texto: '9 Cuotas sin inter√©s', precio: precioLista / 9 },
        { cuotas: 12, texto: '12 Cuotas fijas', precio: (precioLista * 1.05) / 12 } // 5% de inter√©s
    ] : [];

    document.getElementById('product-name').textContent = producto ? producto.nombre : 'Producto no encontrado';
    document.getElementById('product-description').innerHTML = descripcion.replace(/\n/g, '<br>');
    document.querySelector('.stock').textContent = '';

    // Insertar el c√≥digo del producto justo despu√©s del nombre del producto
    const productName = document.getElementById('product-name');
    const codigoEl = document.createElement('p');
    codigoEl.className = 'product-code';
    codigoEl.textContent = 'C√≥digo: ' + codigo;
    productName.insertAdjacentElement('afterend', codigoEl);

    const info = document.querySelector('.product-info');
    const before = document.querySelector('.shipping');

    // Crear contenedor para los precios
    const preciosContainer = document.createElement('div');
    preciosContainer.className = 'precios-container';

    // Insertar precio de lista
    const precioEl = document.createElement('p');
    precioEl.className = 'product-price';
    precioEl.textContent = 'Precio de lista: ' + precioTexto;
    preciosContainer.appendChild(precioEl);

    // Insertar precio anterior si existe
    if (precioAnteriorTexto) {
        const precioAntEl = document.createElement('p');
        precioAntEl.className = 'product-price-anterior';
        precioAntEl.textContent = 'Pre.ant.imp.nac: ' + precioAnteriorTexto;
        preciosContainer.appendChild(precioAntEl);
    }

// Insertar precios en cuotas si hay precio disponible
if (cuotas.length) {
    cuotas.forEach(cuota => {
        const cuotaEl = document.createElement('p');
        cuotaEl.className = `product-cuota product-cuota-${cuota.cuotas}`;
        
        // Definir la imagen y la clase seg√∫n el n√∫mero de cuotas
        let imgSrc, imgClass;
        if (cuota.cuotas === 3 || cuota.cuotas === 6 || cuota.cuotas === 9 || cuota.cuotas === 12) {
            imgSrc = 'images/tarjetas_de_credito.png';
            imgClass = 'cuota-card-icon cuota-card-icon-3-6'; // Clase com√∫n para 3 y 6 cuotas
        
        }

        // Crear el texto de la cuota
        cuotaEl.textContent = `${cuota.texto}: $${cuota.precio.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        
        // Agregar la imagen si existe
        if (imgSrc) {
            const cuotaImg = document.createElement('img');
            cuotaImg.src = imgSrc;
            cuotaImg.alt = `Tarjetas para ${cuota.cuotas} cuotas`;
            cuotaImg.className = imgClass;
            cuotaEl.appendChild(cuotaImg);
        }

        preciosContainer.appendChild(cuotaEl);
    });
}

    // Insertar el contenedor de precios antes del elemento 'shipping'
    info.insertBefore(preciosContainer, before);

    // Insertar stock
    const stockSucEl = document.createElement('p');
    stockSucEl.className = 'product-stock-sucursal';
    stockSucEl.textContent = 'Stock en sucursal: ' + sucursalTexto;
    info.insertBefore(stockSucEl, before);

    const stockDepEl = document.createElement('p');
    stockDepEl.className = 'product-stock-deposito';
    stockDepEl.textContent = 'Stock en dep√≥sito: ' + depositoTexto;
    info.insertBefore(stockDepEl, before);

    const mainImg = document.getElementById('main-image');
    if (imagenes.length) {
        mainImg.src = imagenes[0];
        mainImg.alt = producto ? producto.nombre : '';
    }
    const thumb = document.getElementById('thumbnail-gallery');
    thumb.innerHTML = '';
    imagenes.forEach((src, i) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = (producto ? producto.nombre : 'Imagen') + ' ' + (i + 1);
        img.className = i === 0 ? 'active' : '';
        img.onclick = () => mainImg.src = src;
        thumb.appendChild(img);
    });

    const feats = document.getElementById('product-features');
    feats.innerHTML = '';
    caracteristicas.forEach(f => {
        const li = document.createElement('li');
        li.textContent = f;
        feats.appendChild(li);
    });

    const wa = document.getElementById('whatsapp-consulta');
    const msg = `Hola, quiero un presupuesto al contado para ${producto ? producto.nombre : 'producto desconocido'} (C√≥digo ${codigo}).`;
    wa.href = `https://api.whatsapp.com/send?phone=5491131680489&text=${encodeURIComponent(msg)}`;
    const wat = document.getElementById('whatsapp-contado');
    const mssg = `Hola, quiero info acerca de ${producto ? producto.nombre : 'producto desconocido'} (C√≥digo ${codigo}).`;
    wat.href = `https://api.whatsapp.com/send?phone=5491131680489&text=${encodeURIComponent(mssg)}`;
    
});


document.addEventListener('DOMContentLoaded', () => {
    // Solo ejecutar si estamos en la p√°gina de producto
    if (document.body.classList.contains('product-page')) {
        let lastScrollTop = 0;
        const header = document.querySelector('.header');

        window.addEventListener('scroll', () => {
            let currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            // Scroll hacia abajo: ocultar header parcialmente
            if (currentScroll > lastScrollTop && currentScroll > header.offsetHeight) {
                header.classList.add('hidden');
                header.classList.remove('show'); // Asegurar que no tenga la clase partial
            }
            // Scroll hacia arriba: mostrar header parcialmente
            else if (currentScroll < lastScrollTop) {
                header.classList.remove('hidden'); // Quitar clase hidden
                header.classList.add('show'); // A√±adir clase partial
            }

            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // Evitar valores negativos
        });
    }
});

    </script>
</body>
</html>
